"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[25951],{762587:e=>{e.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"==typeof n.maxKeys&&(o=n.maxKeys);var l=e.length;o>0&&l>o&&(l=o);for(var s=0;s<l;++s){var d,c,u,p,h=e[s].replace(a,"%20"),m=h.indexOf(r);(m>=0?(d=h.substr(0,m),c=h.substr(m+1)):(d=h,c=""),u=decodeURIComponent(d),p=decodeURIComponent(c),Object.prototype.hasOwnProperty.call(i,u))?Array.isArray(i[u])?i[u].push(p):i[u]=[i[u],p]:i[u]=p}return i}},712361:e=>{var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,r,n,i){return(r=r||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e)?Object.keys(e).map(function(i){var a=encodeURIComponent(t(i))+n;return Array.isArray(e[i])?e[i].map(function(e){return a+encodeURIComponent(t(e))}).join(r):a+encodeURIComponent(t(e[i]))}).join(r):i?encodeURIComponent(t(i))+n+encodeURIComponent(t(e)):""}},817673:(e,t,r)=>{t.decode=t.parse=r(762587),t.encode=t.stringify=r(712361)},110098:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useHyperlinkExperiment_pin",selections:[{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"descriptionLinks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="bdd5959de70eab688d40f2293a76638c";let i=n},583462:(e,t,r)=>{r.d(t,{Z:()=>d}),r(167912);var n,i=r(78039),a=r(967312),o=r(174646),l=r(538645);let s=(void 0!==n||(n=r(110098)).hash&&"bdd5959de70eab688d40f2293a76638c"!==n.hash&&console.error("The definition of 'useHyperlinkExperiment_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function d(e,t=!1){let r=(0,i.Z)(s,e),n=!!(r?.descriptionLinks&&r.descriptionLinks.length>0),c=t||!n,{isAuthenticated:u}=(0,o.B)(),p=(0,l.HG)(),h=(0,l.ml)(),{checkExperiment:m}=(0,a.r)(),_=u&&p&&m("dweb_closeup_hyperlink_keywords",{dangerouslySkipActivation:c}).anyEnabled,g=u&&h&&m("mweb_closeup_hyperlink_keywords_auth",{dangerouslySkipActivation:c}).anyEnabled;return{hyperlinkKeywordsEnabled:_||g}}},30694:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(691772),i=r(992114);function a(e,t,r,a,o){let l=new URLSearchParams,s=t.reduce((e,t)=>{if(null!=t){let r=function(e){let t;try{t=decodeURIComponent(e)}catch(r){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(n){let r=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(r&&r.length>1)return r[1];return e}}(t);return e.add(r)}return e},new Set);l.append(n.NR.SOURCE_EVENT_ID,e??"0"),l.append(n.NR.DESTINATION,JSON.stringify([...s])),l.append(n.NR.EXPIRY,r?n.uV:n.ug),l.append(n.NR.PRIORITY,r?n.NR.CLICK_PRIORITY:n.NR.VIEW_PRIORITY),o&&l.append(n.NR.ADVERTISER_ID,o),a&&l.append(n.NR.CAMPAIGN_ID,a),l.append(n.NR.SOURCE_EVENT_TYPE,r?n.bC:n.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&l.append(n.NR.HOSTNAME,e)}catch(e){(0,i.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+l.toString()}},86369:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(420205),i=r(463227),a=r(985630);function o(e,t){let r=Math.round(1e3*Math.random())+"",o=Math.round(1e3*Math.random())+"";i.t8((0,n.GS)(r),o);let l={token:`${r}-${o}`,url:e,...t&&!t.params?t.queryParams:t?.params&&{pin:t.params.pinId??void 0,isThirdPartyAd:t.params.isThirdPartyAd??void 0,csr:t.params.csrId&&!t.params.pinId?t.params.csrId:void 0,client_tracking_params:t.params.clientTrackingParams,aux_data:t.params.auxData?JSON.stringify(t.params.auxData):void 0}};return`/offsite/?${(0,a.Z)(l)}`}},687979:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(397657),i=r(43535),a=r(733668);let o=async({clientTrackingParams:e,href:t,pinId:r,spamCheckCallback:o})=>{let l=await function(e){let t=(0,i.Z)(e),r=a.y8.get("ApiResource",t);if(r)return r;let o=(0,n.Z)(e);return a.y8.add("ApiResource",t,o),o}({url:"/v3/offsite/",data:{check_only:!0,client_tracking_params:e,pin_id:r,url:t}});if(!l.resource_response.error){let{message:e,redirect_status:t,url:r}=l.resource_response.data||{};o({blocked:["blocked","suspicious","porn"].includes(t),message:e,redirectStatus:t,sanitized_url:r})}}},840305:(e,t,r)=>{r.d(t,{Z:()=>n});function n({isOffsiteUrl:e,event:t}){return!e&&(t.metaKey||t.ctrlKey)}},44041:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(779947),i=r(712151),a=r(171764),o=r(859930),l=r(440118);let s=({event:e,onHistoryChange:t,href:r,history:s,target:d})=>{let c=(0,i.Z)(r),u=("string"!=typeof r&&r?r.state:null)??{},p=(0,a.Z)(c);p===l.Z.TRUSTED_DIFFERENT_ORIGIN||"blank"===d?(0,n.Z)(c,"blank"===d):s&&p===l.Z.SAME_ORIGIN&&(s.push((0,o.Z)({url:c}),{from:s.location,...u}),t&&t({event:e}))}},948694:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(779947),i=r(86369);function a(e,t){(0,n.Z)((0,i.Z)(e,t),!0,t?.features)}},608351:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(229865);function i({location:e,pinId:t,surface:r}){return!!r&&!n.ZF.includes(r)||e.pathname.includes(t)}},840962:(e,t,r)=>{r.d(t,{Z:()=>_});var n=r(667294),i=r(616550),a=r(583462),o=r(687979),l=r(840305),s=r(44041),d=r(608351),c=r(725107),u=r(712151),p=r(611395),h=r(423188),m=r(992114);function _(e){let{clientTrackingParams:t,externalData:r,href:_,onHistoryChange:g,target:y}=e,[f,k]=(0,n.useState)(null),b=(0,i.k6)(),I=(0,i.TH)(),w=(0,u.Z)(_),P=(0,p.Z)({url:w}),{showWarning:A}=(0,h.n)()??{},{pin:v,surface:R}=r||{},{hyperlinkKeywordsEnabled:S}=(0,a.Z)(null,!0),Z=t||v?.trackingParams,x=(0,c.Z)();return(0,n.useEffect)(()=>{P&&v&&null===f&&(!v.promoter||v.isDownstreamPromotion)&&(0,d.Z)({location:I,pinId:v.entityId,surface:R})&&(0,o.Z)({clientTrackingParams:Z,pinId:v.entityId,spamCheckCallback:e=>k(e),href:w})},[Z,v,R,w,P,I,f]),({event:e})=>{if(!(0,l.Z)({isOffsiteUrl:P,event:e})){if(S&&"string"==typeof _&&_.startsWith("pinterest://")){let t=_.replace(/^pinterest:\/\//,"/");(0,s.Z)({event:e,href:t,history:b,onHistoryChange:g,target:"blank"===y?"blank":null});return}if(e.preventDefault(),!_||"string"==typeof _&&_.startsWith("#"))return void(0,m.nP)("link_navigation_empty_href",{sampleRate:1,tags:{route:I.pathname,href:_}});P||r?.dangerouslyForceOffsiteUrl?x({auxData:r?.auxData,clientTrackingParams:Z,pin:r?.pin&&{attributionSourceId:r.pin.attributionSourceId,campaignId:r.pin.campaignId,isPromoted:r.pin.isPromoted,pinPromotionId:r.pin.pinPromotionId,isThirdPartyAd:r.pin.isThirdPartyAd,advertiserId:r.pin.advertiserId,destinationUrl:r.pin.destinationUrl,link:r.pin.link,domain:r.pin.domain},pinId:r?.pin?.entityId,queryParams:r?.queryParams,showWarning:A,spamCheck:f,url:w}):(0,s.Z)({event:e,href:_,history:b,onHistoryChange:g,target:"blank"===y?"blank":null})}}}},725107:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(947717),i=r(691772),a=r(30694),o=r(576183),l=r(779947),s=r(19963),d=r(86369),c=r(948694),u=r(204682);let p=e=>{let t=(()=>{let{logContextEvent:e}=(0,s.u)();return({attributionSourceId:t,auxData:r,campaignId:l,clientTrackingParams:s,href:c,isPromoted:u,pinId:p,pinPromotionId:h,isThirdPartyAd:m,advertiserId:_,destinationUrl:g,link:y,domain:f})=>{if(!u)return!1;let k=(0,n.Z)(),b={params:{pinId:p,csrId:null,clientTrackingParams:s,auxData:r,isThirdPartyAd:m}},I=(0,d.Z)(c,b);k?.experimentsClient.checkExperiment("web_ad_destination_url").anyEnabled&&u&&c===g&&(fetch((0,d.Z)(g,b),{redirect:"manual"}),I=g);let w=k?.userAgent.browserName??"";if((0,o.G6)(w)){let r=k?.userAgent.browserVersion?k.userAgent.browserVersion:"0.0",n=parseFloat(r.split(".")[0]+"."+r.split(".")[1]);if(t&&n>=14.1){var P=I;let r=document.createElement("a");return r.setAttribute("href",P),r.setAttribute("target","_blank"),r.setAttribute("rel","noopener nofollow noreferrer"),r.style.cursor="pointer",r.style.display="block",r.setAttribute(i.$N.ATTRIBUTION_SOURCE_ID,t),r.setAttribute(i.$N.ATTRIBUTE_DESTINATION,c),r.setAttribute(i.$N.ATTRIBUTE_ON,c),r.click(),e({event_type:101,clientTrackingParams:s,object_id_str:p||"",aux_data:{pin_id:p||"",click_measurement_ppid:h||"",click_measurement_campaign_id:l||"",is_pcm:!0,attribution_source_id:t,page_url:c}}),!0}}else if((0,o.i7)(w)&&window.document.featurePolicy?.allowsFeature("attribution-reporting")){var A=I;let r=(0,a.Z)(t,[g,y,f],!0,l,_),n=document.createElement("a");return n.setAttribute("href",A),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener nofollow noreferrer"),n.style.cursor="pointer",n.style.display="block",n.setAttribute(i.NR.SOURCE,r),n.click(),e({event_type:101,clientTrackingParams:s,object_id_str:p||"",aux_data:{pin_id:p||"",click_measurement_ppid:h||"",click_measurement_campaign_id:l||"",is_arapi:!0,attribution_source_id:t,page_url:c}}),!0}return!1}})();return({auxData:r,clientTrackingParams:i,pin:a,pinId:o,queryParams:s,showWarning:p,spamCheck:h,url:m})=>{if("undefined"!=typeof window&&window.Windows)return void(0,u.Z)(m,{clientTrackingParams:i,pinId:o,hasPin:!!a,auxData:r,isThirdPartyAd:a?.isThirdPartyAd});if(!a&&!e?.isFromClickthroughLink)return void(0,c.Z)(m,s?{queryParams:s}:{params:{pinId:o}});if(h?.blocked)return void p?.(h);if(a&&t({attributionSourceId:a.attributionSourceId,auxData:r,campaignId:a.campaignId?String(a.campaignId):null,clientTrackingParams:i,href:m,isPromoted:a.isPromoted,pinId:o,pinPromotionId:a.pinPromotionId?String(a.pinPromotionId):null,isThirdPartyAd:a.isThirdPartyAd,advertiserId:a.advertiserId?a.advertiserId:null,destinationUrl:a.destinationUrl,link:a.link,domain:a.domain}))return;let _={params:{clientTrackingParams:i,auxData:r,pinId:o,isThirdPartyAd:a?.isThirdPartyAd}},g=(0,n.Z)();if(g?.experimentsClient.checkExperiment("web_ad_destination_url").anyEnabled&&a?.isPromoted&&m===a?.destinationUrl){fetch((0,d.Z)(m,_),{redirect:"manual"}),(0,l.Z)(m,!0);return}(0,c.Z)(m,_)}}},204682:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(397657),i=r(948694);function a(e,t){let{auxData:r,clientTrackingParams:a,hasPin:o,pinId:l,isThirdPartyAd:s}=t||{},d={pin_id:l,check_only:!0,client_tracking_params:o?a:void 0,url:e,aux_data:JSON.stringify(r)};s&&(d.third_party_ad=l,delete d.pin_id),(0,n.Z)({url:"/v3/offsite/",data:d}).then(t=>{if(t&&t.resource_response&&!t.resource_response.error){let{resource_response:e}=t,{redirect_status:r,url:n}=e.data;if(!["blocked","suspicious","porn"].includes(r)){if(window.Windows.Foundation&&window.Windows.System&&window.Windows.System.Launcher&&window.Windows.System.Launcher.launchUriAsync){let e=new window.Windows.Foundation.Uri(n);window.Windows.System.Launcher.launchUriAsync(e)}return}}(0,i.Z)(e,{params:o?{pinId:l,clientTrackingParams:a,auxData:r,isThirdPartyAd:s}:{pinId:l}})})}},229865:(e,t,r)=>{r.d(t,{Wv:()=>i,ZF:()=>n,zI:()=>a,zl:()=>o});let n=["AuthHomefeed","CloseupRelatedProducts","FollowingFeedGrid","RelatedPinGrid","RelatedProductsFeed","SearchItem"],i=["ArticleProductsStory","CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","RelatedProductsFeed","UserProfilePinGrid","ShoppingGridShippedMetadataWithVisitButton"],a=[...i,"ShoppingGridShippedMetadata","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ProductPinsFeed","ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid","SearchAdsOnlyModule","ShoppingTool","ProductPinRetrieval"],o=["ShoppingSquareGridDomain","ShoppingGridShippedMetadata","ShoppingGridShippedMetadataWithVisitButton"]},423188:(e,t,r)=>{r.d(t,{Z:()=>g,n:()=>_});var n=r(667294),i=r(218291),a=r(608575),o=r(20256),l=r(852015),s=r(513277),d=r(51340),c=r(785893);let u=()=>{let e=(0,s.Z)(),{dismissWarning:t}=_()??{};return(0,c.jsx)(o.xu,{paddingX:3,children:(0,c.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:t,text:e.bt("OK", "Okay", "Dismiss a modal stating that clicking through to a link has been blocked", undefined, true)})})},p=()=>{let e=(0,s.Z)();return(0,c.jsx)(o.xv,{inline:!0,weight:"bold",children:(0,c.jsx)(o.rU,{display:"inlineBlock",href:"https://policy.pinterest.com/community-guidelines#section-spam",target:"blank",underline:"hover",children:e.bt("Learn more", "Learn more", "Link text leading to policy website", undefined, true)})})},h=({message:e,sanitized_url:t})=>{let r=(0,s.Z)(),{dismissWarning:n}=_()??{};return(0,c.jsx)(l.ZP,{accessibilityModalLabel:r.bt("We have blocked this link", "We have blocked this link", "Modal label when clicking a spammy link", undefined, true),footer:(0,c.jsx)(u,{}),heading:r.bt("Heads up!", "Heads up!", "Modal heading when clicking through to a link has been blocked", undefined, true),onDismiss:n,children:(0,c.jsxs)(o.xu,{padding:6,children:[(0,c.jsx)(o.xv,{children:(0,d.nk)("{{ message }} {{ learnMore }}",{message:e,learnMore:(0,c.jsx)(p,{},"learnMoreLink")})}),(0,c.jsxs)(o.xu,{alignItems:"center",display:"flex",marginTop:4,children:[(0,c.jsx)(o.xu,{marginEnd:3,children:(0,c.jsx)(o.JO,{accessibilityLabel:r.bt("Blocked link address", "Blocked link address", "Icon label preceding a block url", undefined, true),color:"error",icon:"report",inline:!0,size:24})}),(0,c.jsx)(o.xv,{inline:!0,lineClamp:1,weight:"bold",children:a.parse(t).hostname})]})]})})},{Provider:m,getMaybe:_}=(0,i.Z)("SpammyClickthrough");function g({children:e}){let[t,r]=(0,n.useState)(null),i=(0,n.useCallback)(()=>{r(null)},[r]),a=(0,n.useCallback)(e=>{r(e)},[r]),o=(0,n.useMemo)(()=>({dismissWarning:i,showWarning:a}),[i,a]);return(0,c.jsxs)(m,{value:o,children:[t&&(0,c.jsx)(h,{...t}),e]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/25951.en_GB-c44a000f022fb64c.mjs.map